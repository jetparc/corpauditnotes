<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corp Audit Notes</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Base Styles */

        body {
            font-family: 'Roboto', sans-serif;
            font-size: 14px;
            text-align: center;
            margin: 0;
            min-height: 100vh;
            padding: 10px;
            background-image: url("https://raw.githubusercontent.com/jetparc/corpauditnotes/refs/heads/main/11852424_4853433.jpg");
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position: center;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Container Styles */

        .phrase-lists {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Table Styles */

        .phrase-table {
            table-layout: auto;
            height: 100%;
            margin: 0;
            border-collapse: collapse;
            width: 100%;
            max-width: 400px;
            border-radius: 20px;
            box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.1);
            background-color: #fff;
            overflow: hidden;
        }

        .phrase-table__header {
            background: linear-gradient(135deg, #c3cfe2 00%, #f5f7fa 100%);
            color: white;
            font-weight: 700;
            border-bottom: 2px solid #e0e0e0;
        }

        .phrase-table__cell {
            padding: 10px;
            text-align: left;
            word-wrap: break-word;
        }

        .phrase-table__row--header {
            cursor: default;
        }

        .phrase-table__row:not(.phrase-table__row--header):hover .phrase-table__cell {
            background-color: #e8e8e8;
        }

        .phrase-table__cell--body {
            background-color: #f8f8f8;
            border-bottom: 1px solid #eaeaea;
            user-select: none;
            position: relative;
            transition: background-color 0.3s, transform 0.1s;
        }

        .phrase-table__cell--title {
            background: rgba(255, 255, 255, 0.1);
            /* Lighter transparent background */
            backdrop-filter: blur(5px);
            /* Frosted effect */
            color: #666;
            /* Lighter text color */
            font-weight: bold;
            text-align: center;
            padding: 10px;
            border-radius: 5px;
        }

        body:not(.dark-mode) .phrase-table__cell--title {
            color: #333;
        }

        /* Dark Mode Toggle */

        .dark-mode-toggle {
            position: fixed;
            top: 5px;
            left: 5px;
            background: none;
            border: none;
            padding: 0;
            font-size: 16px;
            cursor: pointer;
            z-index: 20;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .dark-mode-toggle:hover {
            opacity: 1;
        }

        /* Input and Button Styles */

        .input-container {
            display: flex;
            align-items: center;
            margin-top: 30px;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
        }

        .input-container__text-box {
            width: 100%;
            margin-bottom: 30px;
            padding: 15px;
            font-size: 16px;
            border: none;
            border-radius: 25px;
            resize: none;
            background-color: #f0f0f0;
            box-shadow: inset 0px 3px 6px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s;
        }

        .input-container__text-box:focus {
            outline: none;
            box-shadow: inset 0px 3px 6px rgba(0, 0, 0, 0.2);
        }

        .input-container__add-button {
            margin-left: -40px;
            margin-bottom: 30px;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
            transition: background 0.3s, box-shadow 0.3s, transform 0.1s;
        }

        .input-container__add-button:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .input-container__add-button:active {
            transform: translateY(0);
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.3);
        }

        /* Delete Button */

        .delete-button {
            padding: 2px 6px;
            font-size: 12px;
            font-weight: bold;
            color: #fff;
            background-color: #FF416C;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, box-shadow 0.3s, transform 0.1s;
            margin-left: auto;
        }

        .delete-button:hover {
            background-color: #FF4B2B;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        .delete-button:active {
            transform: translateY(2px);
            box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Delete Button Positioning */

        .phrase-table__cell--body {
            display: flex;
            align-items: center;
            justify-content: space-between;
            /* Push delete button to the right */
        }

        /* Custom Alert */

        .custom-alert {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .custom-alert--hidden {
            display: none;
        }

        .custom-alert__content {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 90%;
        }

        .custom-alert__message {
            margin: 0 0 20px;
            font-size: 16px;
            color: #333;
        }

        .custom-alert__close-button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 12px;
            color: #fff;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
            transition: background 0.3s, box-shadow 0.3s, transform 0.1s;
        }

        .custom-alert__close-button:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .custom-alert__close-button:active {
            transform: translateY(0);
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.3);
        }

        /* Responsive Design */

        @media (max-width: 768px) {
            .phrase-table {
                max-width: 90%;
                margin: 10px auto;
            }
            .phrase-table__cell {
                padding: 10px;
            }
            .input-container {
                margin-top: 20px;
            }
            .input-container__text-box {
                font-size: 14px;
            }
            .input-container__add-button {
                font-size: 14px;
            }
            .delete-button {
                font-size: 12px;
            }
            .custom-alert__content {
                padding: 20px;
            }
            .custom-alert__message {
                font-size: 16px;
            }
            .custom-alert__close-button {
                font-size: 14px;
            }
        }

        /* Dark Mode Styles */

        body.dark-mode {
            background: linear-gradient(135deg, #222 0%, #333 100%);
            /* Dark gradient background */
            color: #f4f4f4;
        }

        /* Table Styles in Dark Mode */

        body.dark-mode .phrase-table {
            background-color: #444;
            /* Darker table background */
            box-shadow: 0px 10px 20px rgba(255, 255, 255, 0.1);
            /* Lighter shadow for contrast */
        }

        body.dark-mode .phrase-table__header {
            background: linear-gradient(135deg, #444 0%, #555 100%);
            /* Darker header gradient */
            border-bottom: 2px solid #555;
            /* Lighter border for header */
        }

        body.dark-mode .phrase-table__cell--title {
            background-color: #666;
            /* Darker title background */
            color: #f4f4f4;
        }

        body.dark-mode .phrase-table__cell--body {
            background-color: #555;
            /* Dark background for table cells */
            color: #f4f4f4;
            /* Light text for contrast */
            border-bottom: 1px solid #666;
            /* Lighter border between rows */
        }

        /* Row Hover Effect in Dark Mode */

        body.dark-mode .phrase-table__row:not(.phrase-table__row--header):hover .phrase-table__cell {
            background-color: #666;
            /* Darker hover effect */
        }

        /* Dark Mode for Input Container */

        body.dark-mode .input-container__text-box {
            background-color: #333;
            /* Dark input box */
            color: #f4f4f4;
            /* Light text in input box */
            box-shadow: inset 0px 3px 6px rgba(255, 255, 255, 0.1);
            /* Subtle inner shadow */
        }

        body.dark-mode .input-container__text-box:focus {
            box-shadow: inset 0px 3px 6px rgba(255, 255, 255, 0.2);
            /* Focus effect for input */
        }

        .custom-alert__close-button:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .custom-alert__close-button:active {
            transform: translateY(0);
            box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.3);
        }

        /* Dark Mode Custom Alert */

        body.dark-mode .custom-alert__content {
            background: linear-gradient(135deg, #444 0%, #333 100%);
            /* Darker alert background */
            color: white;
            /* Light text for alert */
            box-shadow: 0px 10px 20px rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .custom-alert__close-button {
            background: linear-gradient(135deg, #627b94 0%, #556080 100%);
            /* Dark close button */
            color: #f4f4f4;
        }

        body.dark-mode .custom-alert__close-button:hover {
            background: linear-gradient(135deg, #556080 0%, #627b94 100%);
        }

        body.dark-mode .custom-alert__message {
            margin: 0 0 20px;
            font-size: 18px;
            color: white;
        }

        /* Centralized Copied Indicator (Modern Flat UI Design with Round Corners, Gradient, and Centered on Top) */

        .copied-indicator {
            position: fixed;
            top: 10px;
            /* Center it near the top */
            left: 50%;
            /* Center it horizontally */
            transform: translateX(-50%);
            /* Adjust the transform to perfectly center it */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            /* Rounded corners */
            font-size: 16px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease;
            transform: translateX(-50%) translateY(-10px);
            /* Initially position slightly above */
        }

        .copied-indicator--visible {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
            /* Move to the natural position */
        }

        /* Optional: Responsive design tweak for mobile */

        @media (max-width: 768px) {
            .copied-indicator {
                padding: 10px 20px;
                font-size: 14px;
            }
        }

        /* Redesigned Submenu Styles */

        .submenu {
            list-style: none;
            padding: 0;
            margin: 0;
            background-color: #fff;
            border: none;
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            box-shadow: 0px 10px 25px rgba(0, 0, 0, 0.15);
            border-radius: 15px;
            width: 200px;
            text-align: left;
            overflow-y: auto;
            height: auto;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease, transform 0.4s ease;
        }

        .submenu.visible {
            display: block;
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1.05);
        }

        /* Items inside Submenu */

        .submenu__item {
            padding: 10px 15px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.3s, padding 0.3s;
            color: #333;
            border-bottom: 1px solid #eaeaea;
        }

        .submenu__item:last-child {
            border-bottom: none;
        }

        .submenu__item:hover {
            background-color: #f0f0f0;
            padding-left: 30px;
            /* Slight left padding to enhance hover effect */
        }

        @media (max-height: 700px) {
            /* Example media query */
            .submenu {
                max-height: 70vh;
                /* Adjust max-height to 70% of viewport height */
            }
        }

        @media (max-height: 700px) {
            /* Another media query for smaller screens */
            .submenu {
                max-height: 50vh;
                /* Adjust max-height to 50% of viewport height */
            }
        }

        /* Dark Mode Submenu */

        body.dark-mode .submenu {
            background-color: #444;
            border: 1px solid #555;
            box-shadow: 0px 10px 25px rgba(255, 255, 255, 0.1);
        }

        body.dark-mode .submenu__item {
            color: #f4f4f4;
        }

        body.dark-mode .submenu__item:hover {
            background-color: #555;
            padding-left: 30px;
        }

        /* Submenu Close Button */

        .submenu__close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: transparent;
            color: #aaa;
            border: none;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s;
        }

        .submenu__close-button:hover {
            color: #fff;
        }

        /* Optional Animation for Submenu when opening */

        @keyframes slideIn {
            0% {
                transform: translate(-50%, -60%) scale(0.8);
                opacity: 0;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        .submenu.visible {
            animation: slideIn 0.4s ease-out forwards;
        }

        /* Responsive Design */

        @media (max-width: 768px) {
            .submenu {
                min-width: 100%;
                max-width: 90%;
                max-height: 70%;
            }
        }

        .phrase-table__row {
            position: relative;
        }

        /* Clickable Row Styles */

        .phrase-table__row--clickable .phrase-table__cell--body,
        .submenu__item {
            cursor: pointer;
        }

        /* Hidden Copy Text Styles */

        .hidden-copy {
            display: none;
        }

        /* Dragging row */

        .phrase-table__row--dragging {
            opacity: 0.7;
            /* Semi-transparent for a lighter touch */
            box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.4);
            /* More pronounced shadow for emphasis */
            transform: scale(1.05);
            /* Slightly larger for a dramatic effect */
            transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
            /* Smooth animation */
        }

        /* Row where dragging is happening */

        .phrase-table__row--dragover {
            background-color: #e6f7ff;
            /* Light blue for clarity */
            border: 2px dashed #4B0082;
            /* Dashed border for clear drop target */
            transition: background-color 0.2s ease, border 0.2s ease;
            /* Smooth highlight effect */
        }

        /* Dark mode for dragover */

        body.dark-mode .phrase-table__row--dragover {
            background-color: #444;
            /* Neutral dark for visibility */
            border: 2px dashed #8A2BE2;
            /* Complementary light purple for contrast */
        }

        /* Expanding effect for the target row */

        .phrase-table__row--dragover::before {
            content: '';
            display: block;
            height: 5px;
            width: 100%;
            background: linear-gradient(90deg, #4B0082, #8A2BE2);
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
            animation: expandHighlight 0.3s ease infinite alternate;
            /* Smooth animation for attraction */
        }

        /* Keyframe animation for expanding highlight */

        @keyframes expandHighlight {
            from {
                transform: scaleX(0.8);
            }
            to {
                transform: scaleX(1);
            }
        }

        /* General Container for Tip and Reset */

        .reset-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 5px;
            /* Space between tip and reset button */
            margin-top: 20px;
            text-align: center;
        }

        /* Tip Message Styles */

        .drag-tip {
            font-size: 10px;
            font-weight: 200;
            color: #333;
            /* Deep purple */
            padding: 0px 10px;
            border-radius: 5px;
            background-color: #c3cfe2;
            /* Light purple background */
            width: fit-content;
            text-align: center;
            transition: transform 0.3s, background-color 0.3s ease;
        }

        .drag-tip:hover {
            background-color: rgba(75, 0, 130, 0.2);
            /* Slightly darker background on hover */
            transform: scale(1.02);
            /* Subtle zoom effect */
        }

        /* Dark Mode for Tip */

        body.dark-mode .drag-tip {
            color: #ccc;
            background-color: rgba(200, 200, 200, 0.1);
            /* Light gray background */
        }

        body.dark-mode .drag-tip:hover {
            background-color: rgba(200, 200, 200, 0.2);
            /* Slightly darker gray background on hover */
        }

        /* Reset Button Styles */

        .reset-button {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            background-color: #c3cfe2;
            /* Light purple background */
            border: none;
            border-radius: 5px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s, transform 0.2s;
        }

        .reset-button:hover {
            background-color: rgba(75, 0, 130, 0.2);
            /* Slightly darker background on hover */
            transform: scale(1.4);
            /* Subtle zoom effect */
        }

        /* Dark Mode for Reset Button */

        body.dark-mode .reset-button {
            color: #ccc;
            /* Dark gray for icon/text */
            background-color: rgba(200, 200, 200, 0.1);
            /* Light gray background */
        }

        body.dark-mode .reset-button:hover {
            background-color: rgba(200, 200, 200, 0.2);
            /* Slightly darker gray background on hover */
            transform: scale(1.4);
            /* Same zoom effect as light mode */
        }

        /* Tooltip Container */

        .tooltip-container {
            position: relative;
            display: inline-block;
        }

        /* Tooltip Styles */

        .tooltip {
            visibility: hidden;
            opacity: 0;
            font-size: 12px;
            color: #fff;
            background: rgba(0, 0, 0, 0.8);
            /* Semi-transparent black */
            text-align: center;
            border-radius: 10px;
            width: 120px;
            padding: 6px 10px;
            position: absolute;
            z-index: 1000;
            bottom: 150%;
            /* Position above the button */
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        /* Tooltip Arrow */

        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 6px;
            border-style: solid;
            border-color: rgba(0, 0, 0, 0.8) transparent transparent transparent;
        }

        /* Tooltip Visible on Hover */

        .tooltip-container:hover .tooltip {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Dark Mode for Tooltip */

        body.dark-mode .tooltip {
            background: rgba(255, 255, 255, 0.9);
            /* Light background for dark mode */
            color: #333;
            box-shadow: 0px 4px 8px rgba(255, 255, 255, 0.2);
        }

        body.dark-mode .tooltip::after {
            border-color: rgba(255, 255, 255, 0.9) transparent transparent transparent;
        }

        }
    </style>
</head>

<body>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()" aria-label="Toggle Dark Mode">
        <span id="mode-icon">☀️</span>
    </button>
    <main class="phrase-lists">
    </main>

    <div class="input-container">
        <textarea class="input-container__text-box" id="newItemText" placeholder="Enter your text here..."></textarea>
        <button class="input-container__add-button" onclick="addToOthers()">+</button>
    </div>

    <div class="reset-container">
        <div id="dragTip" class="drag-tip">
            <p>Tip: You can drag and drop the rows to rearrange them.</p>
        </div>
        <div class="tooltip-container">
            <button id="resetButton" class="reset-button" onclick="confirmReset()">↻</button>
            <span class="tooltip">Click to reset the tables and delete all the saved content.</span>
        </div>
    </div>
    <div id="customAlert" class="custom-alert custom-alert--hidden" role="alert" aria-live="assertive">
        <div class="custom-alert__content">
            <p class="custom-alert__message" id="alertMessage"></p>
            <button class="custom-alert__close-button" onclick="closeAlert()">OK</button>
        </div>
    </div>
    <div id="resetConfirmationAlert" class="custom-alert custom-alert--hidden" role="alert" aria-live="assertive">
        <div class="custom-alert__content">
            <p class="custom-alert__message">Are you sure you want to reset the tables and delete ALL the saved
                content?</p>
            <button class="custom-alert__close-button" onclick="resetTables()">Yes</button>
            <button class="custom-alert__close-button" onclick="closeResetConfirmation()">No</button>
        </div>
    </div>
    <div id="copiedIndicator" class="copied-indicator">Copied!</div>
    <script>
        let openSubmenu = null; // Keep track of the currently open submenu
        let draggedRow = null; // Keep track of the currently dragged row

        // Store the original table data
        const originalCorpAuditPhrases = [
            'Completed',
            'None',
            {
                text: 'Visiting Outlier pages',
                submenu: ['Visiting Outlier pages', '<span class="hidden-copy">Visiting Outlier pages - </span><5 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>5 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>6 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>7 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>8 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>9 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>10 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>15 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>20 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>25 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>30 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>35 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>40 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>45 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>50 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>55 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>60 minutes',
                    '<span class="hidden-copy">Visiting Outlier pages - </span>60+ minutes'
                ]
            },
            {
                text: 'Pasted text',
                submenu: ['Pasted text', '<span class="hidden-copy">Pasted text -</span> internal',
                    '<span class="hidden-copy">Pasted text -</span> external',
                    '<span class="hidden-copy">Pasted text -</span> Another response already used'
                ]
            },
            'Pasted URL',
            'Copy/Paste as per instructions',
            'Inactivity related to task',
            {
                text: 'Inactivity',
                submenu: [
                    '<span class="hidden-copy">Inactivity - </span><5 minutes',
                    '<span class="hidden-copy">Inactivity - </span>5 minutes',
                    '<span class="hidden-copy">Inactivity - </span>6 minutes',
                    '<span class="hidden-copy">Inactivity - </span>7 minutes',
                    '<span class="hidden-copy">Inactivity - </span>8 minutes',
                    '<span class="hidden-copy">Inactivity - </span>9 minutes',
                    '<span class="hidden-copy">Inactivity - </span>10 minutes',
                    '<span class="hidden-copy">Inactivity - </span>15 minutes',
                    '<span class="hidden-copy">Inactivity - </span>20 minutes',
                    '<span class="hidden-copy">Inactivity - </span>25 minutes',
                    '<span class="hidden-copy">Inactivity - </span>30 minutes',
                    '<span class="hidden-copy">Inactivity - </span>35 minutes',
                    '<span class="hidden-copy">Inactivity - </span>40 minutes',
                    '<span class="hidden-copy">Inactivity - </span>45 minutes',
                    '<span class="hidden-copy">Inactivity - </span>50 minutes',
                    '<span class="hidden-copy">Inactivity - </span>55 minutes',
                    '<span class="hidden-copy">Inactivity - </span>60 minutes',
                    '<span class="hidden-copy">Inactivity - </span>60+ minutes'

                ]
            },
            {
                text: 'Inactivity before submitting',
                submenu: ['<span class="hidden-copy">Inactivity before submitting - </span><5 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>5 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>6 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>7 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>8 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>9 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>10 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>15 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>20 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>25 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>30 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>35 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>40 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>45 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>50 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>55 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>60 minutes',
                    '<span class="hidden-copy">Inactivity before submitting - </span>60+ minutes'
                ]
            },
            {
                text: 'Meaningless activity',
                submenu: ['<span class="hidden-copy">Meaningless activity - </span><5 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>5 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>6 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>7 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>8 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>9 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>10 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>15 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>20 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>25 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>30 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>35 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>40 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>45 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>50 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>55 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>60 minutes',
                    '<span class="hidden-copy">Meaningless activity - </span>60+ minutes'
                ]
            },
            {
                text: 'Meaningless activity before submitting',
                submenu: ['<span class="hidden-copy">Meaningless activity before submitting - </span><5 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>5 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>6 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>7 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>8 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>9 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>10 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>15 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>20 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>25 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>30 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>35 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>40 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>45 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>50 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>55 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>60 minutes',
                    '<span class="hidden-copy">Meaningless activity before submitting - </span>60+ minutes'
                ]
            }
        ];

        const originalToolsPhrases = [
            'Using grammar correction tool',
            'Auto Typer',
            'AI text generator',
            {
                text: 'Other cheating software',
                submenu: ['Other cheating software', 'Auto Mouse Clicker <span class="hidden-copy">- Other cheating software</span>',
                    'Auto Mouse Scroller <span class="hidden-copy">- Other cheating software</span>',
                    'Auto Mouse Jiggler/Mover <span class="hidden-copy">- Other cheating software</span>'
                ]
            },
            {
                text: 'Abuse: Task time was maxed out at the start',
                submenu: ['Abuse: Task time was maxed out at the start', '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span><5 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>5 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>6 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>7 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>8 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>9 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>10 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>15 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>20 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>25 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>30 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>35 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>40 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>45 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>50 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>55 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>60 minutes',
                    '<span class="hidden-copy">Abuse: Task time was maxed out at the start - </span>60+ minutes'
                ]
            },
            {
                text: 'Task Starts Here',
                submenu: ['Attempt 1 <span class="hidden-copy">Task Starts Here</span>',
                    'Attempt 2 <span class="hidden-copy">Task Starts Here</span>',
                    'Attempt 3 <span class="hidden-copy">Task Starts Here</span>'
                ]
            },
            {
                text: 'Task Ends Here',
                submenu: ['Attempt 1 <span class="hidden-copy">Task Ends Here</span>',
                    'Attempt 2 <span class="hidden-copy">Task Ends Here</span>',
                    'Attempt 3 <span class="hidden-copy">Task Ends Here</span>'
                ]
            },
            'Backgrounded'
        ];

        const originalPersonaPhrases = [
            'Fake ID', 'Deepfake Selfie',
            'ID is a screenshot from a mobile device or computer/laptop screen'
        ];

        function adjustSubmenuHeight() {
            const submenu = document.querySelector('.submenu');
            if (submenu) {
                const submenuTop = submenu.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                const availableHeight = windowHeight - submenuTop - 20;
                submenu.style.maxHeight = `${availableHeight}px`;
            }
        }

        adjustSubmenuHeight();

        window.addEventListener('resize', adjustSubmenuHeight);
        window.addEventListener('scroll', adjustSubmenuHeight);

        function toggleDarkMode() {
            const body = document.body;
            body.classList.toggle('dark-mode');
            document.getElementById('mode-icon').textContent = body.classList.contains('dark-mode') ? '🌑' : '☀️';
        }

        function showAlert(message) {
            const alertBox = document.getElementById('customAlert');
            document.getElementById('alertMessage').textContent = message;
            alertBox.classList.remove('custom-alert--hidden');
        }

        function closeAlert() {
            document.getElementById('customAlert').classList.add('custom-alert--hidden');
        }

        function copyPhrase(item) {
            const submenuItem = item.closest('.submenu__item');
            let textToCopy = '';

            if (submenuItem) {
                const children = submenuItem.childNodes;
                for (let i = 0; i < children.length; i++) {
                    const child = children[i];
                    if (child.nodeType === Node.TEXT_NODE) {
                        textToCopy += child.textContent;
                    } else if (child.nodeType === Node.ELEMENT_NODE) {
                        textToCopy += child.textContent;
                    }
                }
            } else {
                const clonedCell = item.cloneNode(true);
                const deleteButton = clonedCell.querySelector('.delete-button');
                if (deleteButton) {
                    deleteButton.remove();
                }
                textToCopy = clonedCell.textContent;
            }

            navigator.clipboard.writeText(textToCopy.trim()).then(() => {
                const copiedIndicator = document.getElementById('copiedIndicator');
                copiedIndicator.classList.add('copied-indicator--visible');
                setTimeout(() => {
                    copiedIndicator.classList.remove('copied-indicator--visible');
                }, 1000);

                if (openSubmenu) {
                    openSubmenu.classList.remove('visible');
                    openSubmenu = null;
                }
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        // Function to get all table data for saving
        function getTableData() {
            const tables = document.querySelectorAll('.phrase-table');
            const tableData = {};

            tables.forEach(table => {
                const tableId = table.id;
                const rows = Array.from(table.querySelectorAll('.phrase-table__row:not(.phrase-table__row--header)'));

                const rowData = rows.map(row => {
                    const cell = row.querySelector('.phrase-table__cell');
                    const submenu = row.querySelector('.submenu');

                    // Get text content without the delete button
                    let cellText = '';
                    for (let i = 0; i < cell.childNodes.length; i++) {
                        const child = cell.childNodes[i];
                        if (child.nodeType === Node.TEXT_NODE) {
                            cellText += child.nodeValue;
                        } else if (child.nodeType === Node.ELEMENT_NODE && !child.classList.contains('delete-button')) {
                            cellText += child.innerText || child.textContent;
                        }
                    }
                    cellText = cellText.trim();

                    if (submenu) {
                        // Handle submenu data
                        const submenuItems = Array.from(submenu.querySelectorAll('.submenu__item'));
                        return {
                            text: cellText,
                            submenu: submenuItems.map(item => item.innerHTML)
                        };
                    } else {
                        // Handle regular row data
                        return cellText;
                    }
                });

                tableData[tableId] = rowData;
            });

            return tableData;
        }

        // Function to save table data to localStorage
        function saveAllTablesToStorage() {
            const tableData = getTableData();
            localStorage.setItem("allTableData", JSON.stringify(tableData));
        }

        // Load data from local storage to tables
        function loadTablesFromStorage() {
            const storedData = JSON.parse(localStorage.getItem("allTableData"));
            if (storedData) {
                const tables = document.querySelectorAll('.phrase-table');
                tables.forEach(table => {
                    const tableId = table.id;
                    const tbody = table.querySelector('tbody');
                    tbody.innerHTML = ''; // Clear existing rows

                    if (storedData[tableId]) {
                        storedData[tableId].forEach(rowData => {
                            const row = document.createElement('tr');
                            row.classList.add('phrase-table__row');
                            const cell = document.createElement('td');
                            cell.classList.add('phrase-table__cell', 'phrase-table__cell--body');

                            if (typeof rowData === 'object' && rowData.submenu) {
                                // Handle rows with submenus
                                cell.textContent = rowData.text;

                                const submenu = document.createElement('ul');
                                submenu.classList.add('submenu');
                                rowData.submenu.forEach(subItemHTML => {
                                    const submenuItem = document.createElement('li');
                                    submenuItem.classList.add('submenu__item');
                                    submenuItem.innerHTML = subItemHTML;
                                    submenuItem.addEventListener('click', (event) => {
                                        event.stopPropagation();
                                        copyPhrase(submenuItem);
                                        if (openSubmenu) {
                                            openSubmenu.classList.remove('visible');
                                        }
                                        openSubmenu = null;
                                    });
                                    submenu.appendChild(submenuItem);
                                });

                                row.appendChild(cell);
                                row.appendChild(submenu);

                                row.addEventListener('click', () => {
                                    if (openSubmenu && openSubmenu !== submenu) {
                                        openSubmenu.classList.remove('visible');
                                    }
                                    submenu.classList.toggle('visible');
                                    openSubmenu = submenu;
                                });
                            } else {
                                // Handle regular rows
                                cell.textContent = rowData;
                                row.addEventListener('click', () => {
                                    copyPhrase(cell);
                                });
                            }

                            row.classList.add('phrase-table__row--clickable');
                            row.setAttribute('draggable', 'true');

                            // Add delete button to "Others" table rows only if it doesn't exist
                            if (tableId === 'others-table') {
                                // Check if the row already has a delete button
                                const existingDeleteButton = row.querySelector('.delete-button');
                                if (!existingDeleteButton) {
                                    const deleteButton = document.createElement('button');
                                    deleteButton.classList.add('delete-button');
                                    deleteButton.textContent = '×';
                                    deleteButton.setAttribute('aria-label', 'Delete');
                                    deleteButton.addEventListener('click', (event) => {
                                        event.stopPropagation();
                                        row.remove();
                                        saveAllTablesToStorage();
                                    });
                                    // Append the delete button to the cell, not the row
                                    cell.appendChild(deleteButton);
                                }
                            }

                            row.appendChild(cell);
                            tbody.appendChild(row);
                        });
                    }
                });

                // Add drag and drop listeners to all tables
                const allTables = document.querySelectorAll('.phrase-table tbody');
                allTables.forEach(tbody => {
                    addDragAndDropListeners(tbody);
                });
            }
        }

        function createPhraseTable(tableId, title, phrases = []) {
            const table = document.createElement('table');
            table.classList.add('phrase-table');
            table.id = tableId;

            if (title) {
                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');
                headerRow.classList.add('phrase-table__header', 'phrase-table__row--header');
                const headerCell = document.createElement('th');
                headerCell.colSpan = 1;
                headerCell.classList.add('phrase-table__cell', 'phrase-table__cell--title');
                headerCell.textContent = title;
                headerRow.appendChild(headerCell);
                thead.appendChild(headerRow);
                table.appendChild(thead);
            }

            const tbody = document.createElement('tbody');
            table.appendChild(tbody);

            phrases.forEach(phrase => {
                const row = document.createElement('tr');
                row.classList.add('phrase-table__row');
                const cell = document.createElement('td');
                cell.classList.add('phrase-table__cell', 'phrase-table__cell--body');

                if (typeof phrase === 'string') {
                    cell.textContent = phrase;
                    row.appendChild(cell);
                    row.classList.add('phrase-table__row--clickable');
                    cell.addEventListener('click', () => {
                        copyPhrase(cell);
                    });
                } else if (typeof phrase === 'object' && phrase.submenu) {
                    cell.textContent = phrase.text;
                    const submenu = document.createElement('ul');
                    submenu.classList.add('submenu');
                    phrase.submenu.forEach(subPhrase => {
                        const submenuItem = document.createElement('li');
                        submenuItem.classList.add('submenu__item');
                        submenuItem.innerHTML = subPhrase;
                        submenuItem.addEventListener('click', (event) => {
                            event.stopPropagation();
                            copyPhrase(submenuItem);
                            closeSubmenu();
                        });
                        submenu.appendChild(submenuItem);
                    });

                    row.appendChild(cell);
                    row.appendChild(submenu);

                    row.addEventListener('click', () => {
                        if (openSubmenu && openSubmenu !== submenu) {
                            openSubmenu.classList.remove('visible');
                        }
                        submenu.classList.toggle('visible');
                        openSubmenu = submenu;
                    });
                    row.classList.add('phrase-table__row--clickable');
                }

                // Add delete button to "Others" table only if it doesn't exist
                if (tableId === 'others-table') {
                    // Check if the row already has a delete button
                    const existingDeleteButton = row.querySelector('.delete-button');
                    if (!existingDeleteButton) {
                        const deleteButton = document.createElement('button');
                        deleteButton.classList.add('delete-button');
                        deleteButton.textContent = '×';
                        deleteButton.setAttribute('aria-label', 'Delete');
                        deleteButton.addEventListener('click', (event) => {
                            event.stopPropagation();
                            row.remove();
                            saveAllTablesToStorage();
                        });
                        // Append the delete button to the cell, not the row
                        cell.appendChild(deleteButton);
                    }
                }

                row.setAttribute('draggable', 'true');
                tbody.appendChild(row);
            });

            document.addEventListener('click', (event) => {
                if (openSubmenu && !event.target.closest('.phrase-table__row--clickable')) {
                    openSubmenu.classList.remove('visible');
                    openSubmenu = null;
                }
            });

            return table;
        }

        function addToOthers() {
            const textBox = document.getElementById('newItemText');
            const newText = textBox.value.trim();

            if (newText === '') {
                showAlert('Please enter some text.');
                return;
            }

            const othersTable = document.getElementById('others-table');
            const newRow = document.createElement('tr');
            newRow.classList.add('phrase-table__row', 'phrase-table__row--clickable');
            const cell = document.createElement('td');
            cell.classList.add('phrase-table__cell', 'phrase-table__cell--body');

            // Set text content directly, without including the delete button
            cell.textContent = newText;

            cell.addEventListener('click', () => {
                copyPhrase(cell);
            });

            const deleteButton = document.createElement('button');
            deleteButton.classList.add('delete-button');
            deleteButton.textContent = '×';
            deleteButton.setAttribute('aria-label', 'Delete');
            deleteButton.addEventListener('click', (event) => {
                event.stopPropagation();
                newRow.remove();
                saveAllTablesToStorage();
            });

            newRow.setAttribute('draggable', 'true');

            // Append the delete button to the cell
            cell.appendChild(deleteButton);
            newRow.appendChild(cell);
            othersTable.querySelector('tbody').appendChild(newRow);

            addDragAndDropListeners(othersTable.querySelector('tbody'));

            textBox.value = '';
            saveAllTablesToStorage()
        }

        function addDragAndDropListeners(tbody) {
            tbody.addEventListener('dragstart', (event) => {
                draggedRow = event.target;
                event.dataTransfer.setData('text', '');
                draggedRow.classList.add('phrase-table__row--dragging');

            });

            tbody.addEventListener('dragover', (event) => {
                event.preventDefault();
                const targetRow = event.target.closest('.phrase-table__row');

                if (targetRow && targetRow !== draggedRow) {
                    const targetRect = targetRow.getBoundingClientRect();
                    const targetMiddleY = targetRect.top + targetRect.height / 2;

                    if (event.clientY < targetMiddleY) {
                        targetRow.classList.add('phrase-table__row--dragover');
                        targetRow.style.borderTop = "2px solid blue";
                        targetRow.style.borderBottom = "";

                    } else {
                        targetRow.classList.add('phrase-table__row--dragover');
                        targetRow.style.borderTop = "";
                        targetRow.style.borderBottom = "2px solid blue";
                    }
                }
            });

            tbody.addEventListener('dragleave', (event) => {
                const targetRow = event.target.closest('.phrase-table__row');
                if (targetRow) {
                    targetRow.classList.remove('phrase-table__row--dragover');
                    targetRow.style.borderTop = "";
                    targetRow.style.borderBottom = "";
                }
            });

            tbody.addEventListener('drop', (event) => {
                event.preventDefault();
                const targetRow = event.target.closest('.phrase-table__row');
                if (targetRow && draggedRow && targetRow !== draggedRow) {
                    const targetRect = targetRow.getBoundingClientRect();
                    const targetMiddleY = targetRect.top + targetRect.height / 2;

                    // Get the table bodies of the dragged row and the target row
                    const draggedRowTbody = draggedRow.closest('tbody');
                    const targetRowTbody = targetRow.closest('tbody');

                    if (event.clientY < targetMiddleY) {
                        targetRowTbody.insertBefore(draggedRow, targetRow); // Insert before
                    } else {
                        targetRowTbody.insertBefore(draggedRow, targetRow.nextSibling); // Insert after
                    }

                    // Save to local storage after reordering
                    saveAllTablesToStorage();

                    // Remove highlighting and reset draggedRow
                    if (targetRow) {
                        targetRow.classList.remove('phrase-table__row--dragover');
                        targetRow.style.borderTop = "";
                        targetRow.style.borderBottom = "";
                    }
                    draggedRow.classList.remove('phrase-table__row--dragging');
                    draggedRow = null;

                } else if (draggedRow) {
                    // If dropped outside a valid target, just remove highlighting from dragged row
                    draggedRow.classList.remove('phrase-table__row--dragging');
                    draggedRow = null;
                }
            });

        }
        
        function confirmReset() {
            const alertBox = document.getElementById('resetConfirmationAlert');
            alertBox.classList.remove('custom-alert--hidden');
        }

        function closeResetConfirmation() {
            document.getElementById('resetConfirmationAlert').classList.add('custom-alert--hidden');
        }


        // Reset tables to their original state
        function resetTables() {
            // Close the confirmation alert
            closeResetConfirmation();

            
            // 1. Clear table data from local storage:
            localStorage.removeItem("allTableData");

            // 2. Remove current tables
            const phraseListsContainer = document.querySelector('.phrase-lists');
            phraseListsContainer.innerHTML = '';

            // 3. Recreate tables with original data
            const corpAuditTable = createPhraseTable('corp-audit-table', 'Corp Audit Notes', originalCorpAuditPhrases);
            const toolsTable = createPhraseTable('tools-table', null, originalToolsPhrases);
            const personaTable = createPhraseTable('persona-table', 'Persona', originalPersonaPhrases);
            const othersTable = createPhraseTable('others-table', 'Others', []); // Others is initially empty

            // 4. Append tables to the container
            phraseListsContainer.appendChild(corpAuditTable);
            phraseListsContainer.appendChild(toolsTable);
            phraseListsContainer.appendChild(personaTable);
            phraseListsContainer.appendChild(othersTable);

            // 5. Re-add drag and drop listeners
            const allTables = document.querySelectorAll('.phrase-table tbody');
            allTables.forEach(tbody => {
                addDragAndDropListeners(tbody);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const phraseListsContainer = document.querySelector('.phrase-lists');

            const corpAuditTable = createPhraseTable('corp-audit-table', 'Corp Audit Notes', originalCorpAuditPhrases);
            const toolsTable = createPhraseTable('tools-table', null, originalToolsPhrases);
            const personaTable = createPhraseTable('persona-table', 'Persona', originalPersonaPhrases);
            const othersTable = createPhraseTable('others-table', 'Others', []);

            phraseListsContainer.appendChild(corpAuditTable);
            phraseListsContainer.appendChild(toolsTable);
            phraseListsContainer.appendChild(personaTable);
            phraseListsContainer.appendChild(othersTable);

            // Load tables from local storage (if data exists)
            loadTablesFromStorage();

            // Add drag and drop listeners to all tables after creating them
            const allTables = document.querySelectorAll('.phrase-table tbody');
            allTables.forEach(tbody => {
                addDragAndDropListeners(tbody);
            });
        });
    </script>
</body>

</html>
